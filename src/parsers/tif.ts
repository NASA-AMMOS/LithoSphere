/**
 * tif tiles are .tifs (shocking, I know)
 * Seams per tile are NOT corrected
 * Generated by external services such as a map server
 */
import { fromArrayBuffer } from '../secondary/geotiff/geotiff'

export default function TifParser(
    tilePath: string,
    layerObj?: any,
    xyz?: any,
    tileResolution?: number,
    numberOfVertices?: number
): Promise<number[]> {
    return new Promise((resolve, reject) => {
        fetch(tilePath)
            .then((resp) => resp.arrayBuffer())
            .then((buffer) => {
                fromArrayBuffer(buffer).then((tif) => {
                    tif.readRasters()
                        .then((rasters) => {
                            resolve(rasters[0])
                        })
                        .catch(() => {
                            reject()
                        })
                })
            })
            .catch(() => {
                reject()
            })
    })
}
